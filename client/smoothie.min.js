class Smoothie{constructor(a={engine:PIXI,renderer:void 0,root:void 0,update:void 0,interpolate:!0,fps:60,renderFps:void 0,properties:{position:!0,rotation:!0,size:!1,scale:!1,alpha:!1,tile:!1}}){if(void 0===a.engine)throw new Error('Please assign a rendering engine as Smoothie\'s engine option');if(this.engine='',a.engine.particles.ParticleContainer&&a.engine.Sprite&&(this.renderingEngine='pixi',this.Container=a.engine.Container,this.Sprite=a.engine.Sprite,this.MovieClip=a.engine.extras.AnimatedSprite),void 0===a.renderer)throw new Error('Please assign a renderer object as Smoothie\'s renderer option');else this.renderer=a.renderer;if(void 0===a.root)throw new Error('Please assign a root container object (the stage) as Smoothie\'s rootr option');else this.stage=a.root;if(void 0===a.update)throw new Error('Please assign a function that you want to update on each frame as Smoothie\'s update option');else this.update=a.update;this.properties=void 0===a.properties?{position:!0,rotation:!0}:a.properties,this._fps=void 0===a.fps?void 0:a.fps,this._renderFps=void 0===a.renderFps?void 0:a.renderFps,this.interpolate=!1!==a.interpolate,this.paused=!1,this._startTime=Date.now(),this._frameDuration=1e3/this._fps,this._lag=0,this._lagOffset=0,this._renderStartTime=0,void 0!==this._renderFps&&(this._renderDuration=1e3/this._renderFps)}get fps(){return this._fps}set fps(a){this._fps=a,this._frameDuration=1e3/this._fps}get renderFps(){return this._renderFps}set renderFps(a){this._renderFps=a,this._renderDuration=1e3/this._renderFps}get dt(){return this._lagOffset}pause(){this.paused=!0}resume(){this.paused=!1}start(){this.gameLoop()}gameLoop(a){if(requestAnimationFrame(this.gameLoop.bind(this)),!this.paused){let b=()=>{let c=Date.now(),d=c-this._startTime;for(1e3<d&&(d=this._frameDuration),this._startTime=c,this._lag+=d;this._lag>=this._frameDuration;)this.capturePreviousSpriteProperties(),this.update(),this._lag-=this._frameDuration;this._lagOffset=this._lag/this._frameDuration,this.render(this._lagOffset)};void 0===this._fps?(this.update(),this.render()):void 0===this._renderFps?b():a>=this._renderStartTime&&(b(),this._renderStartTime=a+this._renderDuration)}}capturePreviousSpriteProperties(){let a=b=>{if(this.properties.position&&(b._previousX=b.x,b._previousY=b.y),this.properties.rotation&&(b._previousRotation=b.rotation),this.properties.size&&(b._previousWidth=b.width,b._previousHeight=b.height),this.properties.scale&&(b._previousScaleX=b.scale.x,b._previousScaleY=b.scale.y),this.properties.alpha&&(b._previousAlpha=b.alpha),this.properties.tile&&(void 0!==b.tilePosition&&(b._previousTilePositionX=b.tilePosition.x,b._previousTilePositionY=b.tilePosition.y),void 0!==b.tileScale&&(b._previousTileScaleX=b.tileScale.x,b._previousTileScaleY=b.tileScale.y)),b.children&&0<b.children.length)for(let d,c=0;c<b.children.length;c++)d=b.children[c],a(d)};for(let c,b=0;b<this.stage.children.length;b++)c=this.stage.children[b],a(c)}render(a=1){if(this.interpolate){let b=c=>{if(this.properties.position&&(c._currentX=c.x,c._currentY=c.y,void 0!==c._previousX&&(c.x=(c.x-c._previousX)*a+c._previousX),void 0!==c._previousY&&(c.y=(c.y-c._previousY)*a+c._previousY)),this.properties.rotation&&(c._currentRotation=c.rotation,void 0!==c._previousRotation&&(c.rotation=(c.rotation-c._previousRotation)*a+c._previousRotation)),this.properties.size&&(c instanceof this.Sprite||c instanceof this.MovieClip)&&(c._currentWidth=c.width,c._currentHeight=c.height,void 0!==c._previousWidth&&(c.width=(c.width-c._previousWidth)*a+c._previousWidth),void 0!==c._previousHeight&&(c.height=(c.height-c._previousHeight)*a+c._previousHeight)),this.properties.scale&&(c._currentScaleX=c.scale.x,c._currentScaleY=c.scale.y,void 0!==c._previousScaleX&&(c.scale.x=(c.scale.x-c._previousScaleX)*a+c._previousScaleX),void 0!==c._previousScaleY&&(c.scale.y=(c.scale.y-c._previousScaleY)*a+c._previousScaleY)),this.properties.alpha&&(c._currentAlpha=c.alpha,void 0!==c._previousAlpha&&(c.alpha=(c.alpha-c._previousAlpha)*a+c._previousAlpha)),this.properties.tile&&(void 0!==c.tilePosition&&(c._currentTilePositionX=c.tilePosition.x,c._currentTilePositionY=c.tilePosition.y,void 0!==c._previousTilePositionX&&(c.tilePosition.x=(c.tilePosition.x-c._previousTilePositionX)*a+c._previousTilePositionX),void 0!==c._previousTilePositionY&&(c.tilePosition.y=(c.tilePosition.y-c._previousTilePositionY)*a+c._previousTilePositionY)),void 0!==c.tileScale&&(c._currentTileScaleX=c.tileScale.x,c._currentTileScaleY=c.tileScale.y,void 0!==c._previousTileScaleX&&(c.tileScale.x=(c.tileScale.x-c._previousTileScaleX)*a+c._previousTileScaleX),void 0!==c._previousTileScaleY&&(c.tileScale.y=(c.tileScale.y-c._previousTileScaleY)*a+c._previousTileScaleY))),0!==c.children.length)for(let e,d=0;d<c.children.length;d++)e=c.children[d],b(e)};for(let d,c=0;c<this.stage.children.length;c++)d=this.stage.children[c],b(d)}if(this.renderer.render(this.stage),this.interpolate){let b=c=>{if(this.properties.position&&(c.x=c._currentX,c.y=c._currentY),this.properties.rotation&&(c.rotation=c._currentRotation),this.properties.size&&(c instanceof this.Sprite||c instanceof this.MovieClip)&&(c.width=c._currentWidth,c.height=c._currentHeight),this.properties.scale&&(c.scale.x=c._currentScaleX,c.scale.y=c._currentScaleY),this.properties.alpha&&(c.alpha=c._currentAlpha),this.properties.tile&&(void 0!==c.tilePosition&&(c.tilePosition.x=c._currentTilePositionX,c.tilePosition.y=c._currentTilePositionY),void 0!==c.tileScale&&(c.tileScale.x=c._currentTileScaleX,c.tileScale.y=c._currentTileScaleY)),0!==c.children.length)for(let e,d=0;d<c.children.length;d++)e=c.children[d],b(e)};for(let d,c=0;c<this.stage.children.length;c++)d=this.stage.children[c],b(d)}}}