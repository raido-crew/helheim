<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Helheim</title>
    <link href="index.css" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Raleway:500" rel="stylesheet">
</head>
<body onload="init(); mainText();">

    <canvas id="gCanvas">Canvas didn't work!!..</canvas>

    <div class="centreDiv" id="mainText">Coming soon</div>

    <!-- PIXI.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pixi.js/4.0.0/pixi.min.js"></script>

    <script>
        let windowSize = [window.innerWidth, window.innerHeight];
        let frameTick = 0;
        const tileSpeed = 0.16;
        const fenceHeightDecomal = 0.15625;

        function init() {
            windowSize = [window.innerWidth, window.innerHeight];
            stage = new PIXI.Container();
            renderer = PIXI.autoDetectRenderer(
                windowSize[0],
                windowSize[1],
                {view:document.getElementById("gCanvas")}
            );
            document.body.appendChild(renderer.view);

            makeTextures();

            requestAnimationFrame(update);
        }

        function update() {
            far.tilePosition.x = 0 - frameTick * tileSpeed / 2;
            mid.tilePosition.x = 0 - frameTick * tileSpeed;
            frameTick ++;

            renderer.render(stage);

            requestAnimationFrame(update);
        }

        function resize() {
            init();
        }

        function makeTextures() {
            const farTexture = PIXI.Texture.fromImage("resources/bgFar.png");
            far = new PIXI.extras.TilingSprite(farTexture, window.innerWidth * 2, window.innerHeight);
            far.position.x = 0;
            far.position.y = 0;
            far.tilePosition.x = 0;
            far.tilePosition.y = 0;
            stage.addChild(far);

            const midTexture = PIXI.Texture.fromImage("resources/bgMid.png");
            mid = new PIXI.extras.TilingSprite(midTexture, window.innerWidth * 2, window.innerHeight * fenceHeightDecomal);
            mid.position.x = 0;
            mid.position.y = window.innerHeight * (1 - fenceHeightDecomal);
            mid.tilePosition.x = 0;
            mid.tilePosition.y = 0;
            stage.addChild(mid);
        }

        window.onresize = function() {
            resize();
        };
    </script>
    <!-- PIXI.js end -->

    <script>
        function mainText() {
            document.getElementById("mainText").style.WebkitTransition = "all 2s"; // for Safari 3.1 to 6.0
            document.getElementById("mainText").style.transition = "all 2s"
        }
    </script>
</body>
</html>